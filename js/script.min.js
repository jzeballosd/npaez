// JavaScript Document
var callback = function () {
	    "use strict";
// Slide Down Nav
    $("ul.bottomnav li a").hover(function () {
        $(this).addClass("subhover");
        $(this).parent().find("ul.subnav").slideDown('fast').show();
    }).parent().mouseleave(function () {
        $(this).removeClass("subhover");
        $(this).find("ul.subnav").slideUp('slow');
    });
// Slide main Nav
  if ($(window).width() > 767) {
	  $(".dropdown a").hover(function () {	  
        $(this).parent().find(".dropdown-menu").first().slideDown('fast').show();
    }).parent().mouseleave(function () {
        $(this).find(".dropdown-menu").first().slideUp('slow');
    });
	$(document).click(function(){
		$(".dropdown-menu").css("display", "none");
	})
}

	
// Tab
    $("#tabnav ul li.active").show();
	var tabActive = $('#tabnav ul li.active').find("a").attr("href");
	$(tabActive).fadeIn();
	
    $("#tabnav ul li").click(function () {
        $("#tabnav ul li").removeClass("active");
        $(this).addClass("active");
        $(".tab-content").hide();
        var tabActive = $(this).children("a").attr("href");
        $(tabActive).fadeIn();
        return false;
    });
	
// BACK TO TOP
    $('#back_top').click(function () {
        $('body,html').animate({
            scrollTop: 0
        }, 800);
        return false;
    });
	
//FanceyBox
    $('.fancybox').fancybox();
// Nice Scroll
	var nice = $("html").niceScroll({
	cursorcolor: "#0092ff",
	cursoropacitymax: 1,
	cursorborder: "0",
	cursorwidth:"6px",
	boxzoom: true
	});
//$(".navbar-collapse").niceScroll({cursorborder:"0",cursorwidth:"6px",cursorborderradius:"0",cursorcolor:"#0092ff",boxzoom:true}); 

// Products Color choser
    $("form .color_chooser a").click(function () {
        $("form .color_chooser a").removeClass("active_color");
        $("form .color_chooser a").css("opacity", 0.5);
        $(this).addClass("active_color");
        $(this).css("opacity", 1);
    });

// Products Size choser
    $("form .size_chooser a").click(function () {
        $("form .size_chooser a").removeClass("active_size");
        $("form .size_chooser a").css("opacity", 0.5);
        $(this).addClass("active_size");
        $(this).css("opacity", 1);
    });
// Products Preview
$('.prev-thum li a').click(function () {
        var smimage = $(this).data('image');
        var zoom = $(this).data('zoomImage');

        $('#big_image').fadeOut(function () {
            $(this).attr('src', smimage).fadeIn();
        });
		
		$(this).get(0).href = "javascript:void(0);"
				
        $('.box-zoom:last').attr('href', zoom);
    });
//custome form element	
    $('.cform').jqTransform({
        imgPath: 'jqtransfor/img/'
    });	
	
//Tooltips
    $('.tool').tooltip();
	$('#example a').tooltip();

// Sequence Slider
    var options = {
        nextButton: false,
        prevButton: false,
        pagination: true,
        animateStartingFrameIn: true,
        autoPlay: true,
        autoPlayDelay: 3000,
        preloader: true,
        preloadTheseFrames: [1],
        preloadTheseImages: [
            "images/tn-slide-img-01.png",
            "images/tn-slide-img-02.png",
            "images/tn-slide-img-01.png",
            "images/tn-slide-img-02.png"
        ]
    };
    var mySequence = $("#sequence").sequence(options).data("sequence");



// Featured Products Carousel
    $('#featured').carouFredSel({
        auto: false,
        prev: '#prev_featured',
        next: '#next_featured',
        mousewheel: false,
        swipe: {
            onMouse: true,
            onTouch: true
        },
        responsive: true,
        width: '100%',
		scroll: {
			items: 1,
        	duration: 1000,
        },
        items: {
            width: 270,
            visible: {
                min: 1,
                max: 1
            }
        }
    });

// New Products Carousel
    $('#newer').carouFredSel({
        auto: false,
        prev: '#prev_newer',
        next: '#next_newer',
        mousewheel: false,
        swipe: {
            onMouse: true,
            onTouch: true
        },
        responsive: true,
        width: '100%',
        scroll: 1,
        items: {
            width: 270,
            visible: {
                min: 1,
                max: 1
            }
        }
    });

// Brand Logo Carousel	
    $('#brandlogo').carouFredSel({
        auto: true,
        prev: '#prev_logo',
        next: '#next_logo',
        mousewheel: false,
        swipe: {
            onMouse: true,
            onTouch:  true
        },
        responsive: true,
        width: '100%',
        scroll: 1,
        items: {
            width: 270,
            visible: {
                min: 1,
                max: 5
            }
        }
    });

// Products Details 2
    $("#upscroll").carouFredSel({
        direction: "up",
		mousewheel: false,
        align: "top",
        height: "150%",
        items: {
            visible: {
                min: 2,
                max: 4
            },
            width: 25+"%",
            height: "variable"
        },
        scroll: {
            items: 1,
            mousewheel: true,
            easing: "swing",
            duration: 500
        },
        auto: false,
        prev: {
            button: "#upthum",
            key: "up"
        },
        next: {
            button: "#downthum",
            key: "down"
        }

    });
	
// RANGE SLIDER
	for (var i = 1; i <= 100; i++) {
		$('#input-shopby').append(
			i
		);
	}
	$('#shopby').noUiSlider({
		range: [0, 100],
		start: [3, 50],
		handles: 2,
		connect: true,
		step: 1,
		serialization: {
			to: [$('#input-shopby'), $('#input-limit')],
			resolution: 1
		}
	});

//facebook iframe 
$("#fbframe").css("width", "100%");

//flex slider
    $('.flexslider').flexslider({
        animation: "slide",
		mousewheel: true, 
        slideshow: true,
        controlNav: false,
        start: function (slider) {
            $('.banner').removeClass('loading');
        }
    });

};

$(document).ready(callback);
$(window).resize(callback);
$(window).load(function() {
	// Exapnd Serach box
    new UISearch(document.getElementById('sb-search'));
	
	$(".category_nav").accordion({
		accordion: true,
		speed: 500,
		closedSign: '',
		openedSign: ''
	});
	
// fraction slider
 if( $('.fraction').length >0){
	$('.fraction').fractionSlider({
		'fullWidth': 			true,
		'controls': 			true, 
		'pager': 				true,
		'responsive': 			true,
		'dimensions': 			"1170,400",
	    'increase': 			false,
		'pauseOnHover': 		false
	});
	}
	
});


// Pree load images
function preload(arrayOfImages) {
    $(arrayOfImages).each(function(){
        $('<img/>')[0].src = this;
        // Alternatively you could use:
        // (new Image()).src = this;
    });
}

// Usage:
preload([
    'images/banner.png',
    'images/bg.jpg',
    'images/model-01.png',
	'images/model-02.png',
	'images/tn-slide-img-01.png',
	'images/tn-slide-img-02.png',
	'images/slide-img-01.png',	
	'images/slide-img-02.png'
]);

// Email function
function IsEmail(email) {
    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    return regex.test(email);
}

function valEmail(email) {
    var res = /^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    if (!res.test(email)) {
        return false;
    } else {
        return true;
    }        
}

function ValiDate() {

    var name = $('#iname').val();
    var email = $('#iemail').val();
    var telefono = $('#itelef').val();
    var ciudad = $('#iciudad').val();
    var reason = $('#button-reason').attr("data-item");
    var textarea = $('#textarea').val();        
     
    var ername = '';
    var eremail = '';
    var ertelefono = '';
    var erciudad = '';
    var erreason = '';
    var ertextarea = '';
    
    $(".error").html("");

    if (name == '') {
        ername = ername + '<p>Por favor ingrese sus nombres completos</p>';
        $('#iname').addClass('er');
    } else {
        $('#iname').removeClass('er');
    }

    if (email == '') {
        eremail = eremail + '<p>Por favor ingrese un email correcto.</p>';
        $('#iemail').addClass('er');
		
    } else if (!IsEmail(email)) {
        eremail = eremail + '<p>Este formato de email no es correcto.</p>';
        $('#iemail').addClass('er');
    } else {
        $('#iemail').removeClass('er');
    }

    if (telefono == '') {
        ertelefono = ertelefono + '<p>Es necesario ingresar un número de teléfono</p>';
        $('#itelef').addClass('er');
    } else {
        $('#itelef').removeClass('er');
    }

    if (ciudad == '') {
        erciudad = erciudad + '<p>Es necesario ingresar un número de teléfono</p>';
        $('#iciudad').addClass('er');
    } else {
        $('#iciudad').removeClass('er');
    }
    
    if (reason == 'Seleccione') {
        erreason = erreason + '<p>Es necesario seleccionar un motivo</p>';
        $('#button-reason').addClass('er');
    } else {
        $('#button-reason').removeClass('er');
    }
    
    if (textarea == '') {
        ertextarea = ertextarea + '<p>Por favor ingrese algun mensaje.</p>';
        $('#textarea').addClass('er');
    } else {
        $('#textarea').removeClass('er');
    }

    //Ajax colling
    if (ername == '' && eremail == '' && ertelefono == '' && erciudad == '' && erreason == '' && ertextarea == '') {
        var parameters = {
            name: name,
            email: email,
            telefono: telefono,
            ciudad: ciudad,
            reason: reason,
            textarea:textarea
        };

        $.ajax({
            async: true,
            type: "POST",
            contentType: "application/x-www-form-urlencoded",
            url: "response/ajax.php?comment=true",
            data: parameters,
            dataType: 'json',
            //beforeSend:inicioEnvio,
            success: function (res) {
                window.alert(res[0].success);
                $('#iname').val("");
                $('#iemail').val("");
                $('#itelef').val("");
                $('#iciudad').val("");
                $('#button-reason').attr("data-item","Seleccione");
                $('#textarea').val("");  
                $("#button-reason").html("Seleccione<span class='caret'></span>");
                /*
                 $(".mailFromDiv").slideUp(500);
                 $('.mailSuccessDiv').fadeIn(1000);
                 setTimeout(function(){
                     $('.mailSuccessDiv').fadeOut(500);
                     $(".mailFromDiv").slideDown(500);
                 },3000);
                 
                 */
            },
            error: function (dato, status, error) {
                alert(dato.responseText);
            }
        });
        
        
    } else {
        $(".namefild .error").html(ername).fadeIn(500);
	$(".emailfild .error").html(eremail).fadeIn(500);
        $(".telefild .error").html(ertelefono).fadeIn(500);
        $(".ciudfild .error").html(erciudad).fadeIn(500);
        $(".motivfild .error").html(erreason).fadeIn(500);
	$(".messagefild .error").html(ertextarea).fadeIn(500);
    }
}